import Mathlib.CategoryTheory.Over
import Mathlib.CategoryTheory.EqToHom
set_option autoImplicit true

namespace CategoryTheory

--open Opposite
set_option maxHeartbeats 500000
universe v₁ u₁ s₁ t₁--v₂ u₁ u₂
/-
Important: i added some remarks (search for the word Remark)
What did I show?
Firstly In the file PresheavesOfCategories, I constructed a functor

splitfibration B ⥤ PShCat B , which is of independent interest.
Originally i wanted to show, that this is a strong equivalence of 2-categories whose inverse is given by the grothendieck construction
(which i also implemented)


Secondly, the main goal was
  · a functor Sp : fibration B ⥤ splitFibration B
  · equipped with an equivalence of fibrations E: Sp P ⥤c P, which means for me a cartesian functor which is an equivalence on total categories
    (because then, which i tried to formalize, it reflects cartesian morphisms,
    which is almost as good as having a cartesian quasi-inverse functor P ⥤c Sp P)

The functor Sp factors as
  psh ≫ Grothendieck : fibration B ⥤ PShCat B ⥤ splitFibration B
  where the first map is P ↦ Fib(fundamentalfibration · , P)
  so we have to pull back the yoneda embedding at P along a functor
    fundamentalFibration : B ⥤ fibration B

I constructed functors in both directions PShCat B ⥤ splitFibration
